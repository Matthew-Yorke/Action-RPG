//***************************************************************************************************************************************************
//
// File Name: Light.cpp
//
// Description:
//  TODO: Add file description.
//
// Change History:
//  Author               Date           Description
//  Matthew D. Yorke     MM/DD/2018     TODO: Add history update
//
//***************************************************************************************************************************************************

#include <allegro5/allegro_primitives.h>
#include "Light.h"

//***************************************************************************************************************************************************
// Start Public Method Definitions
//***************************************************************************************************************************************************

//***************************************************************************************************************************************************
//
// Method Name: Light
//
// Description:
//  Set member variables to default values using the passed in arguments.
//
//***************************************************************************************************************************************************
Light::Light(int theCoordinateX, int theCoordinateY, int theRadius, ALLEGRO_COLOR theColor, int theOpacity) :
CircleObject(theCoordinateX,
             theCoordinateY,
             theRadius)
{
   mColor = theColor;
   mOpacity = theOpacity;
   mWorldCoordinateX = theCoordinateX;
   mWorldCoordinateY = theCoordinateY;
}

//***************************************************************************************************************************************************
//
// Method Name: CameraUpdate
//
// Description:
//  Update the X-Coordinate and Y-Coordinate relative to the camera coordinates, preventing the light from moving along with the camera.
//
//***************************************************************************************************************************************************
void Light::CameraUpdate(Camera* theCamera)
{
   mWorldCoordinateX = mCoordinateX - theCamera->GetCoordinateX();
   mWorldCoordinateY = mCoordinateY - theCamera->GetCoordinateY();
}

//***************************************************************************************************************************************************
//
// Method Name: Draw
//
// Description:
//  Loop from the furthest radius point to the closest drawing a layer of the light on top of the previous layer.
//
//***************************************************************************************************************************************************
void Light::Draw(Graphics& theGraphics)
{
   for (int currentRadius = GetRadius(); currentRadius > 0; currentRadius--)
   {
      al_draw_filled_circle(mWorldCoordinateX,
                            mWorldCoordinateY,
                            currentRadius,
                            al_map_rgba(mColor.r * 255,
                                        mColor.g * 255,
                                        mColor.b * 255,
                                        mOpacity));
   }
}

//***************************************************************************************************************************************************
// End Public Method Definitions
//***************************************************************************************************************************************************

//***************************************************************************************************************************************************
// Start Protected Method Definitions
//***************************************************************************************************************************************************



//***************************************************************************************************************************************************
// End Protected Method Definitions
//***************************************************************************************************************************************************

//***************************************************************************************************************************************************
// Start Private Method Definitions
//***************************************************************************************************************************************************



//***************************************************************************************************************************************************
// End Private Method Definitions
//***************************************************************************************************************************************************